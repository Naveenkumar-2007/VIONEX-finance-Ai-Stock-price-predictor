schema: '2.0'
stages:
  data_ingestion:
    cmd: python -c "from src.components.data_ingestion import DataIngestion; di =
      DataIngestion(); di.initiate_data_ingestion()"
    deps:
    - path: src/components/data_ingestion.py
      hash: md5
      md5: 4212e213e82161d309ff8d8b919a0e8d
      size: 2199
    params:
      params.yaml:
        data_ingestion.period: 5y
        data_ingestion.ticker: AAPL
    outs:
    - path: artifacts/raw_stock_data.csv
      hash: md5
      md5: 1d67c1de208bca8070ee37d50d6d74b9
      size: 144732
    - path: artifacts/test_stock_data.csv
      hash: md5
      md5: 13020fb2e5c8a5850e93b2c288e1bb99
      size: 29021
    - path: artifacts/train_stock_data.csv
      hash: md5
      md5: 1e5af72ea0a39bb276e7559b1b0051db
      size: 115748
  data_transformation:
    cmd: python -m src.components.data_transformation
    deps:
    - path: artifacts/raw_stock_data.csv
      hash: md5
      md5: 1d67c1de208bca8070ee37d50d6d74b9
      size: 144732
    - path: src/components/data_transformation.py
      hash: md5
      md5: 5cc9f38a0b62bd74df77f0cf140b9363
      size: 1471
    params:
      params.yaml:
        data_transformation.sequence_length: 60
        data_transformation.test_split: 0.2
    outs:
    - path: artifacts/processed_test.npy
      hash: md5
      md5: ecb449f1e5e0f8f787926d8108a7890f
      size: 644451
    - path: artifacts/processed_train.npy
      hash: md5
      md5: 0a6e9258189acf721610f6347d78b4e3
      size: 3087701
    - path: artifacts/scaler.pkl
      hash: md5
      md5: 452c4dac240e54c53ffe6464ae974c76
      size: 903
  model_trainer:
    cmd: python -m src.components.model_trainer
    deps:
    - path: artifacts/processed_test.npy
      hash: md5
      md5: ecb449f1e5e0f8f787926d8108a7890f
      size: 644451
    - path: artifacts/processed_train.npy
      hash: md5
      md5: 0a6e9258189acf721610f6347d78b4e3
      size: 3087701
    - path: src/components/model_trainer.py
      hash: md5
      md5: 77a808b624c8254faf2690032c125efa
      size: 2727
    params:
      params.yaml:
        model.batch_size: 32
        model.epochs: 50
        model.learning_rate: 0.001
        model.lstm_units:
        - 50
        - 50
        - 50
    outs:
    - path: artifacts/stock_lstm_model.h5
      hash: md5
      md5: bea5e665154a342881b179cdf045714c
      size: 1913240
  model_evaluation:
    cmd: python -m mlops.evaluate_model
    deps:
    - path: artifacts/processed_test.npy
      hash: md5
      md5: ecb449f1e5e0f8f787926d8108a7890f
      size: 644451
    - path: artifacts/scaler.pkl
      hash: md5
      md5: 452c4dac240e54c53ffe6464ae974c76
      size: 903
    - path: artifacts/stock_lstm_model.h5
      hash: md5
      md5: bea5e665154a342881b179cdf045714c
      size: 1913240
    - path: mlops/evaluate_model.py
      hash: md5
      md5: 125acf12cf5fe32775d1a7b733cafaf0
      size: 3389
    outs:
    - path: artifacts/error_distribution.png
      hash: md5
      md5: b6062f0e5d34d6b249203b4760322763
      size: 39536
    - path: artifacts/evaluation_metrics.json
      hash: md5
      md5: 5961133de4ba1954fb888e8dcad98836
      size: 164
    - path: artifacts/predictions_plot.png
      hash: md5
      md5: 3f2cfb9644c4b6b593b3ef57e6f7042d
      size: 93538
  model_registration:
    cmd: python -m mlops.registry
    deps:
    - path: artifacts/evaluation_metrics.json
      hash: md5
      md5: 5961133de4ba1954fb888e8dcad98836
      size: 164
    - path: artifacts/stock_lstm_model.h5
      hash: md5
      md5: bea5e665154a342881b179cdf045714c
      size: 1913240
    - path: mlops/registry.py
      hash: md5
      md5: c3e38836c417c20940547f757af766ec
      size: 8371
    outs:
    - path: mlops/model_registry/
      hash: md5
      md5: 63aaa68ca8464856bd511eef2b850bf5.dir
      size: 105
      nfiles: 1
