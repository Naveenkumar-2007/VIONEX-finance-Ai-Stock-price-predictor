schema: '2.0'
stages:
  data_ingestion:
    cmd: python -c "from src.components.data_ingestion import DataIngestion; di =
      DataIngestion(); di.initiate_data_ingestion()"
    deps:
    - path: src/components/data_ingestion.py
      hash: md5
      md5: cc00c6dafd3b15e4611b8fd803b11961
      size: 2721
    params:
      params.yaml:
        data_ingestion.period: 5y
        data_ingestion.ticker: AAPL
    outs:
    - path: artifacts/raw_stock_data.csv
      hash: md5
      md5: 25e4972a04d70c187583c9862a732ce1
      size: 176106
    - path: artifacts/test_stock_data.csv
      hash: md5
      md5: 16369ebc2941b1371164ccc439c4ebeb
      size: 35917
    - path: artifacts/train_stock_data.csv
      hash: md5
      md5: 32c65dedd5b6e80e8f837b0d643577fa
      size: 140226
  data_transformation:
    cmd: python -m src.components.data_transformation
    deps:
    - path: artifacts/raw_stock_data.csv
      hash: md5
      md5: 25e4972a04d70c187583c9862a732ce1
      size: 176106
    - path: src/components/data_transformation.py
      hash: md5
      md5: 5cc9f38a0b62bd74df77f0cf140b9363
      size: 1471
    params:
      params.yaml:
        data_transformation.sequence_length: 60
        data_transformation.test_split: 0.2
    outs:
    - path: artifacts/processed_test.npy
      hash: md5
      md5: 546c56fbb85bc8c4b6aa31502b5e851f
      size: 1025669
    - path: artifacts/processed_train.npy
      hash: md5
      md5: 54aa5fb5dce9a15f7b7664c5403136a1
      size: 4618341
    - path: artifacts/scaler.pkl
      hash: md5
      md5: b8741a28ebbae68c383c84433433254d
      size: 903
  model_trainer:
    cmd: python -m src.components.model_trainer
    deps:
    - path: artifacts/processed_test.npy
      hash: md5
      md5: 546c56fbb85bc8c4b6aa31502b5e851f
      size: 1025669
    - path: artifacts/processed_train.npy
      hash: md5
      md5: 54aa5fb5dce9a15f7b7664c5403136a1
      size: 4618341
    - path: src/components/model_trainer.py
      hash: md5
      md5: 77a808b624c8254faf2690032c125efa
      size: 2727
    params:
      params.yaml:
        model.batch_size: 32
        model.epochs: 50
        model.learning_rate: 0.001
        model.lstm_units:
        - 50
        - 50
        - 50
    outs:
    - path: artifacts/stock_lstm_model.h5
      hash: md5
      md5: 620fa5cf8f7c2f23593584c931a6e483
      size: 1913240
  model_evaluation:
    cmd: python -m mlops.evaluate_model
    deps:
    - path: artifacts/processed_test.npy
      hash: md5
      md5: 546c56fbb85bc8c4b6aa31502b5e851f
      size: 1025669
    - path: artifacts/scaler.pkl
      hash: md5
      md5: b8741a28ebbae68c383c84433433254d
      size: 903
    - path: artifacts/stock_lstm_model.h5
      hash: md5
      md5: 620fa5cf8f7c2f23593584c931a6e483
      size: 1913240
    - path: mlops/evaluate_model.py
      hash: md5
      md5: 125acf12cf5fe32775d1a7b733cafaf0
      size: 3389
    outs:
    - path: artifacts/error_distribution.png
      hash: md5
      md5: 6d28a5e828b720e1157405dcf478db96
      size: 38877
    - path: artifacts/evaluation_metrics.json
      hash: md5
      md5: 224b912e1b92d0b814d8a0ae582bfcf2
      size: 165
    - path: artifacts/predictions_plot.png
      hash: md5
      md5: 425158760f0bc7a506f230d510cae008
      size: 97621
  model_registration:
    cmd: python -m mlops.registry
    deps:
    - path: artifacts/evaluation_metrics.json
      hash: md5
      md5: 224b912e1b92d0b814d8a0ae582bfcf2
      size: 165
    - path: artifacts/stock_lstm_model.h5
      hash: md5
      md5: 620fa5cf8f7c2f23593584c931a6e483
      size: 1913240
    - path: mlops/registry.py
      hash: md5
      md5: c3e38836c417c20940547f757af766ec
      size: 8371
    outs:
    - path: mlops/model_registry/
      hash: md5
      md5: 63aaa68ca8464856bd511eef2b850bf5.dir
      size: 105
      nfiles: 1
